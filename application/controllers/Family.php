<?php


class Family extends CI_Controller {
	
	public function akagoroba(){
		$this->load->view('header');
		$this->load->view('sidebar');
		$this->load->view('abashyitsi');
		$this->load->view('footer');
	}

	public function amaduka(){
		$this->load->view('header');
		$this->load->view('sidebar');
		$this->load->view('amaduka');
		$this->load->view('footer');
	}
	public function abashyitsi(){
		$this->load->view('header');
		$this->load->view('sidebar');
		$this->load->view('abashyitsi');
		$this->load->view('footer');
	}
	public function amabanki(){
		$this->load->view('header');
		$this->load->view('sidebar');
		$this->load->view('amabanki');
		$this->load->view('footer');
	}
	public function amashuri(){
		$this->load->view('header');
		$this->load->view('sidebar');
		$this->load->view('amashuri');
		$this->load->view('footer');
	}
	public function amasoko(){
		$this->load->view('header');
		$this->load->view('sidebar');
		$this->load->view('amasoko');
		$this->load->view('footer');
	}
	public function amatangazo(){
		$this->load->view('header');
		$this->load->view('sidebar');
		$this->load->view('amatangazo');
		$this->load->view('footer');
	}
	public function amavuriro(){
		$this->load->view('header');
		$this->load->view('sidebar');
		$this->load->view('amavuriro');
		$this->load->view('footer');
	}
	public function guhiga(){
		$this->load->view('header');
		$this->load->view('sidebar');
		$this->load->view('guhiga');
		$this->load->view('footer');
	}
	public function guhindura_umwirondoro(){
		$this->load->view('header');
		$this->load->view('sidebar');
		$this->load->view('guhindura_umwirondoro');
		$this->load->view('footer');
	}
	public function hoteli(){
		$this->load->view('header');
		$this->load->view('sidebar');
		$this->load->view('hoteli');
		$this->load->view('footer');
	}
	public function ibarura(){
		$this->load->view('header');
		$this->load->view('sidebar');
		$this->load->view('ibarura');
		$this->load->view('footer');
	}
	public function ibyaranzwe(){
		$this->load->view('header');
		$this->load->view('sidebar');
		$this->load->view('ibyaranzwe');
		$this->load->view('footer');
	}
	public function ibyibwe(){
		$this->load->view('header');
		$this->load->view('sidebar');
		$this->load->view('ibyibwe');
		$this->load->view('footer');
	}
	public function igiceri(){
		$this->load->view('header');
		$this->load->view('sidebar');
		$this->load->view('igiceri');
		$this->load->view('footer');
	}
	public function imihigo(){
		$this->load->view('header');
		$this->load->view('sidebar');
		$this->load->view('imihigo');
		$this->load->view('footer');
	}
	public function inganda(){
		$this->load->view('header');
		$this->load->view('sidebar');
		$this->load->view('inganda');
		$this->load->view('footer');
	}
	public function insengero(){
		$this->load->view('header');
		$this->load->view('sidebar');
		$this->load->view('insengero');
		$this->load->view('footer');
	}
	public function isuku(){
		$this->load->view('header');
		$this->load->view('sidebar');
		$this->load->view('isuku');
		$this->load->view('footer');
	}
	public function kuranga(){
		$this->load->view('header');
		$this->load->view('sidebar');
		$this->load->view('kuranga');
		$this->load->view('footer');
	}
	public function kwandika_umushyitsi(){
		$this->load->view('header');
		$this->load->view('sidebar');
		$this->load->view('kwandika_umushyitsi');
		$this->load->view('footer');
	}
	public function my_issues(){
		$this->load->view('header');
		$this->load->view('sidebar');
		$this->load->view('my_issues');
		$this->load->view('footer');
	}
	public function pharmacy(){
		$this->load->view('header');
		$this->load->view('sidebar');
		$this->load->view('pharmacy');
		$this->load->view('footer');
	}
	public function restaurant(){
		$this->load->view('header');
		$this->load->view('sidebar');
		$this->load->view('restaurant');
		$this->load->view('footer');
	}
	public function salon_de_coiffure(){
		$this->load->view('header');
		$this->load->view('sidebar');
		$this->load->view('salon_de_coiffure');
		$this->load->view('footer');
	}
	public function umuganda(){
		$this->load->view('header');
		$this->load->view('sidebar');
		$this->load->view('umuganda');
		$this->load->view('footer');
	}
	public function umuryango(){
		$this->load->view('header');
		$this->load->view('sidebar');
		$this->load->view('umuryango');
		$this->load->view('footer');
	}
	public function umutekano(){
		$this->load->view('header');
		$this->load->view('sidebar');
		$this->load->view('umutekano');
		$this->load->view('footer');
	}
	public function umwirondoro(){
		$this->load->view('header');
		$this->load->view('sidebar');
		$this->load->view('umwirondoro');
		$this->load->view('footer');
	}
	public function utubari(){
		$this->load->view('header');
		$this->load->view('sidebar');
		$this->load->view('utubari');
		$this->load->view('footer');
	}
	public function chat(){
		$this->load->view('header');
		$this->load->view('sidebar');
		$this->load->view('chat');
		$this->load->view('footer');
	}
	public function amafoto(){
		$this->load->view('header');
		$this->load->view('sidebar');
		$this->load->view('amafoto');
		$this->load->view('footer');
	}
	public function invoice(){
		$this->load->view('header');
		$this->load->view('sidebar');
		$this->load->view('invoice');
		$this->load->view('footer');
	}
	public function kwandika_ibyibwe(){
		$this->load->view('header');
		$this->load->view('sidebar');
		$this->load->view('kwandika_ibyibwe');
		$this->load->view('footer');
	}
	public function umuhigo(){
		$this->load->view('header');
		$this->load->view('sidebar');
		$this->load->view('umuhigo');
		$this->load->view('footer');
	}
	public function ibikorwaremezo(){
		$this->load->view('header');
		$this->load->view('sidebar');
		$this->load->view('ibikorwaremezo');
		$this->load->view('footer');
	}
	public function kwishyura(){
		$this->load->view('header');
		$this->load->view('sidebar');
		$this->load->view('kwishyura');
		$this->load->view('footer');
	}
	public function pay(){
		$this->load->view('header');
		$this->load->view('sidebar');
		$this->load->view('pay');
	}
	public function payUmutekano(){
		
		if ($this->input->post('pay')){
			$amezi = $this->input->post('amezi');
		}
		$amount =intval($amezi)*2000;
		$email = "audasang2018@gmail.com";
		if ($this->input->post('nber')){
			$amount =$this->input->post('amt');
			$request = [
				'tx_ref' => time(),
				'amount' => $amount,
				'currency' => 'RWF',
				'payment_options' => 'mobilemoneyrwanda',
				'redirect_url' => 'http://localhost/ums/process.php',
				'customer' => [
					'email' => $email,
					'name' => 'sanga'
				],
				'meta' => [
					'price' => $amount
				],
				'customizations' => [
					'title' => 'Ishyura umutekano',
					'description' => 'UMS',
					'logo'=> 'http://localhost/pay/sano.png'
				]
			];
		
			//* Ca;; f;iterwave emdpoint
			$curl = curl_init();
		
			curl_setopt_array($curl, array(
			CURLOPT_URL => 'https://api.flutterwave.com/v3/payments',
			CURLOPT_RETURNTRANSFER => true,
			CURLOPT_ENCODING => '',
			CURLOPT_MAXREDIRS => 10,
			CURLOPT_TIMEOUT => 0,
			CURLOPT_FOLLOWLOCATION => true,
			CURLOPT_HTTP_VERSION => CURL_HTTP_VERSION_1_1,
			CURLOPT_CUSTOMREQUEST => 'POST',
			CURLOPT_POSTFIELDS => json_encode($request),
			CURLOPT_HTTPHEADER => array(
				'Authorization: Bearer FLWSECK-083ae3b8d5dfb256278a72490903c75e-X',
				'Content-Type: application/json'
			),
			));
		
			$response = curl_exec($curl);
		
			curl_close($curl);
			
			$res = json_decode($response);
			if($res->status == 'success')
			{
				$link = $res->data->link;
				header('Location: '.$link);
			}
			else
			{
				echo 'We can not process your payment';
			}
		}
		$result['data']=$amount;
		$this->load->view('header');
		$this->load->view('sidebar');
		$this->load->view('pay',$result);		
	}

	public function payIsuku(){
		
		if ($this->input->post('pay')){
			$amezi = $this->input->post('amezi');
		}
		$amount =intval($amezi)*3000;
		$email = "audasang2018@gmail.com";
		if ($this->input->post('nber')){
			$amount =$this->input->post('amt');
			$request = [
				'tx_ref' => time(),
				'amount' => $amount,
				'currency' => 'RWF',
				'payment_options' => 'mobilemoneyrwanda',
				'redirect_url' => 'http://localhost/ums/process.php',
				'customer' => [
					'email' => $email,
					'name' => 'sanga'
				],
				'meta' => [
					'price' => $amount
				],
				'customizations' => [
					'title' => 'Ishyura isuku',
					'description' => 'UMS',
					'logo'=> 'http://localhost/pay/sano.png'
				]
			];
		
			//* Ca;; f;iterwave emdpoint
			$curl = curl_init();
		
			curl_setopt_array($curl, array(
			CURLOPT_URL => 'https://api.flutterwave.com/v3/payments',
			CURLOPT_RETURNTRANSFER => true,
			CURLOPT_ENCODING => '',
			CURLOPT_MAXREDIRS => 10,
			CURLOPT_TIMEOUT => 0,
			CURLOPT_FOLLOWLOCATION => true,
			CURLOPT_HTTP_VERSION => CURL_HTTP_VERSION_1_1,
			CURLOPT_CUSTOMREQUEST => 'POST',
			CURLOPT_POSTFIELDS => json_encode($request),
			CURLOPT_HTTPHEADER => array(
				'Authorization: Bearer FLWSECK-083ae3b8d5dfb256278a72490903c75e-X',
				'Content-Type: application/json'
			),
			));
		
			$response = curl_exec($curl);
		
			curl_close($curl);
			
			$res = json_decode($response);
			if($res->status == 'success')
			{
				$link = $res->data->link;
				header('Location: '.$link);
			}
			else
			{
				echo 'We can not process your payment';
			}
		}
		$result['data']=$amount;
		$this->load->view('header');
		$this->load->view('sidebar');
		$this->load->view('pay',$result);		
	}
}